{"version":3,"sources":["../../src/services/scratchproject.js"],"names":["ScratchProjectService","projectId","toString","projectJson","zip","JSZip","file","generateAsync","type","then","content","res","setHeader","send","err","console","log","status","message"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;AACA;;;;;;;;;;;;;;IAEMA,qB;AAEF,mCAAc;AAAA;;AACV,SAAKC,SAAL,GAAiB,CAAjB;AACH;;;;;sGAEoBA,S;;;;;;;;uBAEa,uCAAeA,SAAS,CAACC,QAAV,EAAf,C;;;AAApBC,gBAAAA,W;iDACCA,W;;;;;;;;;;;;;;;;;;;;;;;;2GAMWF,S;;;;;;;;uBAEQ,uCAAeA,SAAS,CAACC,QAAV,EAAf,C;;;AAApBC,gBAAAA,W;AAEAC,gBAAAA,G,GAAM,IAAIC,iBAAJ,E;AACZD,gBAAAA,GAAG,CAACE,IAAJ,CAAS,cAAT,EAAyBH,WAAzB;AAEAC,gBAAAA,GAAG,CAACG,aAAJ,CAAkB;AAAEC,kBAAAA,IAAI,EAAE;AAAR,iBAAlB,EACCC,IADD,CACM,UAAAC,OAAO,EAAI;AACb;AACAC,kBAAAA,GAAG,CAACC,SAAJ,CAAc,cAAd,EAA8B,iBAA9B;AACAD,kBAAAA,GAAG,CAACE,IAAJ,CAASH,OAAT,EAHa,CAIb;AACA;AACH,iBAPD,WAOS,UAACI,GAAD,EAAU;AACfC,kBAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACH,iBATD;;;;;;;AAYFL,gBAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBJ,IAAhB,CAAqB,aAAIK,OAAzB;;;;;;;;;;;;;;;;;;;;;eAKKlB,qB","sourcesContent":["import {getJsonProject} from './scratchDownloader.js';\nimport JSZip from 'jszip';\n\nclass ScratchProjectService {\n\n    constructor() {\n        this.projectId = 1;\n    }\n\n    async getJsonProject(projectId) {\n        try {\n            const projectJson = await getJsonProject(projectId.toString());\n            return projectJson;\n        } catch (err) {\n            return err;\n        }\n    }\n\n    async downloadJsonProject(projectId) {\n        try {\n            const projectJson = await getJsonProject(projectId.toString()); \n      \n            const zip = new JSZip();\n            zip.file('project.json', projectJson);\n\n            zip.generateAsync({ type: \"nodebuffer\"} )\n            .then(content => { \n                // saveAs(content, projectId.concat('.zip'));\n                res.setHeader(\"Content-Type\", \"application/zip\");\n                res.send(content);\n                // console.log(content);\n                // return content;\n            }).catch((err) =>  {\n                console.log('err');\n            })\n\n        } catch (err) {\n          res.status(400).send(err.message);\n        }\n    }\n}\n\nexport default ScratchProjectService;"],"file":"scratchproject.js"}