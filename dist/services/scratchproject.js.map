{"version":3,"sources":["../../src/services/scratchproject.js"],"names":["ScratchProjectService","constructor","projectId","getJsonProject","projectJson","toString","err","downloadJsonProject","zip","JSZip","file","generateAsync","type","then","content","res","setHeader","send","catch","console","log","status","message"],"mappings":";;;;;;AAAA;;AACA;;;;;;AAEA,MAAMA,qBAAN,CAA4B;;AAExBC,kBAAc;AACV,aAAKC,SAAL,GAAiB,CAAjB;AACH;;AAED,UAAMC,cAAN,CAAqBD,SAArB,EAAgC;AAC5B,YAAI;AACA,kBAAME,cAAc,MAAM,uCAAeF,UAAUG,QAAV,EAAf,CAA1B;AACA,mBAAOD,WAAP;AACH,SAHD,CAGE,OAAOE,GAAP,EAAY;AACV,mBAAOA,GAAP;AACH;AACJ;;AAED,UAAMC,mBAAN,CAA0BL,SAA1B,EAAqC;AACjC,YAAI;AACA,kBAAME,cAAc,MAAM,uCAAeF,UAAUG,QAAV,EAAf,CAA1B;;AAEA,kBAAMG,MAAM,IAAIC,eAAJ,EAAZ;AACAD,gBAAIE,IAAJ,CAAS,cAAT,EAAyBN,WAAzB;;AAEAI,gBAAIG,aAAJ,CAAkB,EAAEC,MAAM,YAAR,EAAlB,EACCC,IADD,CACMC,WAAW;AACb;AACAC,oBAAIC,SAAJ,CAAc,cAAd,EAA8B,iBAA9B;AACAD,oBAAIE,IAAJ,CAASH,OAAT;AACA;AACA;AACH,aAPD,EAOGI,KAPH,CAOUZ,GAAD,IAAU;AACfa,wBAAQC,GAAR,CAAY,KAAZ;AACH,aATD;AAWH,SAjBD,CAiBE,OAAOd,GAAP,EAAY;AACZS,gBAAIM,MAAJ,CAAW,GAAX,EAAgBJ,IAAhB,CAAqBX,IAAIgB,OAAzB;AACD;AACJ;AApCuB;;kBAuCbtB,qB","file":"scratchproject.js","sourcesContent":["import {getJsonProject} from './scratchDownloader.js';\nimport JSZip from 'jszip';\n\nclass ScratchProjectService {\n\n    constructor() {\n        this.projectId = 1;\n    }\n\n    async getJsonProject(projectId) {\n        try {\n            const projectJson = await getJsonProject(projectId.toString());\n            return projectJson;\n        } catch (err) {\n            return err;\n        }\n    }\n\n    async downloadJsonProject(projectId) {\n        try {\n            const projectJson = await getJsonProject(projectId.toString()); \n      \n            const zip = new JSZip();\n            zip.file('project.json', projectJson);\n\n            zip.generateAsync({ type: \"nodebuffer\"} )\n            .then(content => { \n                // saveAs(content, projectId.concat('.zip'));\n                res.setHeader(\"Content-Type\", \"application/zip\");\n                res.send(content);\n                // console.log(content);\n                // return content;\n            }).catch((err) =>  {\n                console.log('err');\n            })\n\n        } catch (err) {\n          res.status(400).send(err.message);\n        }\n    }\n}\n\nexport default ScratchProjectService;"]}